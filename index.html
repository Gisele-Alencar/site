<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estante Solidária</title>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" 
    href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>
<body class="bg-[#fcf8f9] min-h-screen flex flex-col font-sans">

  <!-- Cabeçalho -->
  <header class="flex justify-between items-center p-4 border-b border-[#f3e7ea]">
    <h1 class="text-[#1b0d11] text-xl font-bold">Estante Solidária</h1>
    <button class="bg-[#f0426d] text-white px-4 py-2 rounded-xl font-bold">Register Book</button>
  </header>

  <!-- Formulário de Cadastro -->
  <section class="flex flex-col items-center py-6 px-4">
    <h2 class="text-[#1b0d11] text-2xl font-bold mb-4">Register Your Book</h2>

    <div class="flex flex-col gap-3 w-full max-w-md">
      <input id="titulo" placeholder="Book Title" class="rounded-xl p-4 bg-[#f3e7ea] text-[#1b0d11] focus:outline-none" />
      <select id="estilo" class="rounded-xl p-4 bg-[#f3e7ea] text-[#1b0d11] focus:outline-none">
        <option value="">Select Book Style</option>
        <option value="Fiction">Fiction</option>
        <option value="Children">Children</option>
        <option value="Technical">Technical</option>
        <option value="Mystery">Mystery</option>
      </select>
      <input id="doador" placeholder="Donor Name" class="rounded-xl p-4 bg-[#f3e7ea] text-[#1b0d11] focus:outline-none" />
      <input id="imagem" placeholder="Image URL (optional)" class="rounded-xl p-4 bg-[#f3e7ea] text-[#1b0d11] focus:outline-none" />
      <button id="cadastrar-btn" class="bg-[#f0426d] text-white rounded-xl py-3 font-bold hover:bg-[#e0325c] transition-colors">Register Book</button>
    </div>
  </section>

  <!-- Livros Registrados -->
  <section class="flex-1 px-4 pb-6">
    <h2 class="text-[#1b0d11] text-xl font-bold mb-4">Registered Books</h2>
    <div id="livros-container" class="grid grid-cols-[repeat(auto-fit,minmax(150px,1fr))] gap-4"></div>
  </section>

  <script>
    const livros = [];
    const container = document.getElementById("livros-container");
    const btnCadastrar = document.getElementById("cadastrar-btn");

    function atualizarLivros() {
      container.innerHTML = "";
      livros.forEach((livro, index) => {
        const livroDiv = document.createElement("div");
        livroDiv.className = "flex flex-col gap-2";

        livroDiv.innerHTML = `
          <div class="w-full bg-center bg-no-repeat aspect-[3/4] bg-cover rounded-xl" 
               style='background-image: url("${livro.imagem || "https://via.placeholder.com/150"}")'></div>
          <div>
            <p class="text-[#1b0d11] text-base font-medium">${livro.titulo}</p>
            <p class="text-[#9a4c5f] text-sm">${livro.estilo}</p>
            <button class="mt-2 w-full bg-[#f0426d] text-white rounded-xl py-1 text-sm font-bold ${livro.reservado ? "opacity-50 cursor-not-allowed" : ""}">
              ${livro.reservado ? "Reservado" : "Reservar"}
            </button>
          </div>
        `;

        livroDiv.querySelector("button").addEventListener("click", () => {
          if (!livro.reservado) {
            livro.reservado = true;
            atualizarLivros();
          }
        });

        container.appendChild(livroDiv);
      });
    }

    btnCadastrar.addEventListener("click", () => {
      const titulo = document.getElementById("titulo").value.trim();
      const estilo = document.getElementById("estilo").value;
      const doador = document.getElementById("doador").value.trim();
      const imagem = document.getElementById("imagem").value.trim();

      if (titulo && estilo && doador) {
        livros.push({ titulo, estilo, doador, imagem, reservado: false });
        document.getElementById("titulo").value = "";
        document.getElementById("estilo").value = "";
        document.getElementById("doador").value = "";
        document.getElementById("imagem").value = "";
        atualizarLivros();
      } else {
        alert("Preencha todos os campos obrigatórios!");
      }
    });

    atualizarLivros();
  </script>

</body>
</html>
